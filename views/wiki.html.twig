{% set baseUrl = 'http://' ~ app.request.host ~ app.request.basepath %}

<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

		<title>{% block title %}{% endblock %} - Miki.</title>
	
		{% block stylesheets %}
		<link href="{{ baseUrl }}/css/bootstrap.min.css" rel="stylesheet">
		<link href="{{ baseUrl }}/css/{{ app.theme }}" rel="stylesheet">		
		<link href="{{ baseUrl }}/css/font-awesome.min.css" rel="stylesheet">		
		<link href="{{ baseUrl }}/css/styles.css" rel="stylesheet">
		{% endblock %}

		<link rel="shortcut icon" href="/favicon.ico">
		<base href="{{ baseUrl }}/">
	</head>

	<body>
		<nav class="navbar navbar-default" role="navigation">
			<div class="navbar-header">
				<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a class="navbar-brand" href="{{ app.request.basepath }}/"><i class="fa fa-home"></i></a>
			</div>
			
			<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
				<ul class="nav navbar-nav">
					<li class="category">
						{% for category in page.categories %}
						<a>{{ category }}/</a>
						{% endfor %}
					</li>
					{% if page.siblings is defined %}
					<li class="dropdown">
						<a class="dropdown-toggle" data-toggle="dropdown">
							<strong>{{ page.name }}</strong>
							<b class="caret"></b>
						</a>
						{% if page.siblings is defined %}
						<ul class="dropdown-menu">
						{% for sibling in page.siblings %}
							<li>
								<a href="{{sibling.url}}">{{sibling.name}}</a>
							</li>
						{% endfor %}
						</ul>
						{% endif %}
					</li>
					{% else %}
					<li class="active">
						<a href="#!"><strong>{{ page.name }}</strong></a>
					</li>
					{% endif %}
				</ul>

				<ul class="nav navbar-nav navbar-right">
					<li class="dropdown">
						<a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-cog"></i> <b class="caret"></b></a>
						<ul class="dropdown-menu">
							{% if app.request.attributes.get('_route') != 'page_edit' %}
							<li>
								<a href="{{ path('page_edit', { wikiPage: page.url }) }}" id="page_edit">
									<i class="fa fa-pencil"></i>
									Edit Page
								</a>
							</li>
							{% endif %}
							{% if app.auth %}
							<li class="divider"></li>
							<li>
								<a href="{{ path('logout') }}">
									<i class="fa fa-lock"></i>
									Logout
								</a>
							</li>
							{% endif %}
						</ul>
					</li>
				</ul>
			</div>
		</nav>
		
		<div class="container">

			{% block content %}
			{% endblock %}

			<hr>

			<footer>
				<small>File: {{ page.file }}{% if page.lastMod is defined %} (Last Updated: {{ page.lastMod|date('d.m.Y, H:i') }}){% endif %}</small>
			</footer>
		</div>
		{% block javascript %}
		<script src="js/jquery-2.0.3.min.js" type="text/javascript"></script>
		<script src="js/bootstrap.min.js" type="text/javascript"></script>
		<script src="js/jquery-plugins.min.js" type="text/javascript"></script>
		
		<script type="text/javascript" src="js/Markdown.Converter.js"></script>
		<script type="text/javascript" src="js/Markdown.Sanitizer.js"></script>
		<script type="text/javascript" src="js/Markdown.Editor.js"></script>
		
		<script src="js/functions.js" type="text/javascript"></script>
		{% endblock %}
	</body>
</html>